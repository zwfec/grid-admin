<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>后台主题UI框架 - jqGird</title>
    <link href="assets/styles/bootstrap.min.css" rel="stylesheet">
    <link href="assets/scripts/plugins/jqgrid/styles/ui.jqgrid.css" rel="stylesheet">
    <link href="assets/scripts/plugins/jqgrid/styles/ui.jqgrid.style.css" rel="stylesheet">
    <link href="assets/styles/css3/animate.css" rel="stylesheet">
</head>
<body class="gray-bg">
<div class="wrapper wrapper-content  animated fadeInDown">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox ">
                <div class="ibox-content">
                    <div class="jqGrid_wrapper">
                        <table id="table_list_1"></table>
                        <div id="pager_list_1"></div>
                    </div>
                    <p>&nbsp;</p>
                    <h4 class="m-t">高级用法</h4>
                    <div class="jqGrid_wrapper">
                        <table id="table_list_2"></table>
                        <div id="pager_list_2"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="assets/scripts/jquery-1.12.3.min.js"></script>
<script src="assets/scripts/plugins/jqgrid/i18n/grid.locale-cn.js"></script>
<script src="assets/scripts/plugins/jqgrid/src/jquery.jqGrid.js"></script>
<script>
    $(document).ready(function () {
        $.jgrid.defaults.width = 780;
        $.jgrid.defaults.responsive = true;
        $.jgrid.defaults.styleUI = 'Bootstrap';
        var mydata = [
            {id: "1", invdate: "2010-05-24", name: "test", note: "note", tax: "10.00", total: "2111.00"},
            {id: "2", invdate: "2010-05-25", name: "test2", note: "note2", tax: "20.00", total: "320.00"},
            {id: "3", invdate: "2007-09-01", name: "test3", note: "note3", tax: "30.00", total: "430.00"},
            {id: "4", invdate: "2007-10-04", name: "test", note: "note", tax: "10.00", total: "210.00"},
            {id: "5", invdate: "2007-10-05", name: "test2", note: "note2", tax: "20.00", total: "320.00"},
            {id: "6", invdate: "2007-09-06", name: "test3", note: "note3", tax: "30.00", total: "430.00"},
            {id: "7", invdate: "2007-10-04", name: "test", note: "note", tax: "10.00", total: "210.00"},
            {
                id: "8",
                invdate: "2007-10-03",
                name: "test",
                note: "note2",
                amount: "300.00",
                tax: "21.00",
                total: "320.00"
            },
            {
                id: "9",
                invdate: "2007-09-01",
                name: "test3",
                note: "note3",
                amount: "400.00",
                tax: "30.00",
                total: "430.00"
            },
            {
                id: "11",
                invdate: "2007-10-01",
                name: "test",
                note: "note",
                amount: "200.00",
                tax: "10.00",
                total: "210.00"
            },
            {
                id: "12",
                invdate: "2007-10-02",
                name: "test2",
                note: "note2",
                amount: "300.00",
                tax: "20.00",
                total: "320.00"
            },
            {
                id: "13",
                invdate: "2007-09-01",
                name: "test3",
                note: "note3",
                amount: "400.00",
                tax: "30.00",
                total: "430.00"
            },
            {
                id: "14",
                invdate: "2007-10-04",
                name: "test",
                note: "note",
                amount: "200.00",
                tax: "10.00",
                total: "210.00"
            },
            {
                id: "15",
                invdate: "2007-10-05",
                name: "test2",
                note: "note2",
                amount: "300.00",
                tax: "20.00",
                total: "320.00"
            },
            {
                id: "16",
                invdate: "2007-09-06",
                name: "test3",
                note: "note3",
                amount: "400.00",
                tax: "30.00",
                total: "430.00"
            },
            {
                id: "17",
                invdate: "2007-10-04",
                name: "test",
                note: "note",
                amount: "200.00",
                tax: "10.00",
                total: "210.00"
            },
            {
                id: "18",
                invdate: "2007-10-03",
                name: "test2",
                note: "note2",
                amount: "300.00",
                tax: "20.00",
                total: "320.00"
            },
            {
                id: "19",
                invdate: "2007-09-01",
                name: "test3",
                note: "note3",
                amount: "400.00",
                tax: "30.00",
                total: "430.00"
            },
            {
                id: "21",
                invdate: "2007-10-01",
                name: "test",
                note: "note",
                amount: "200.00",
                tax: "10.00",
                total: "210.00"
            },
            {
                id: "22",
                invdate: "2007-10-02",
                name: "test2",
                note: "note2",
                amount: "300.00",
                tax: "20.00",
                total: "320.00"
            },
            {
                id: "23",
                invdate: "2007-09-01",
                name: "test3",
                note: "note3",
                amount: "400.00",
                tax: "30.00",
                total: "430.00"
            },
            {
                id: "24",
                invdate: "2007-10-04",
                name: "test",
                note: "note",
                amount: "200.00",
                tax: "10.00",
                total: "210.00"
            },
            {
                id: "25",
                invdate: "2007-10-05",
                name: "test2",
                note: "note2",
                amount: "300.00",
                tax: "20.00",
                total: "320.00"
            },
            {
                id: "26",
                invdate: "2007-09-06",
                name: "test3",
                note: "note3",
                amount: "400.00",
                tax: "30.00",
                total: "430.00"
            },
            {
                id: "27",
                invdate: "2007-10-04",
                name: "test",
                note: "note",
                amount: "200.00",
                tax: "10.00",
                total: "210.00"
            },
            {
                id: "28",
                invdate: "2007-10-03",
                name: "test2",
                note: "note2",
                amount: "300.00",
                tax: "20.00",
                total: "320.00"
            },
            {
                id: "29",
                invdate: "2007-09-01",
                name: "test3",
                note: "note3",
                amount: "400.00",
                tax: "30.00",
                total: "430.00"
            }
        ];
        $("#table_list_1").jqGrid({
            data: mydata,
            datatype: "local",
            height: 250,
            autowidth: true,
            shrinkToFit: true,
            rowNum: 14,
            rowList: [10, 20, 30],
            colNames: ["序号", "日期", "客户", "金额", "运费", "总额", "备注"],
            colModel: [{name: "id", index: "id", width: 60, sorttype: "int"}, {
                name: "invdate",
                index: "invdate",
                width: 90,
                sorttype: "date",
                formatter: "date"
            }, {name: "name", index: "name", width: 100}, {
                name: "amount",
                index: "amount",
                width: 80,
                align: "right",
                sorttype: "float",
                formatter: "number"
            }, {name: "tax", index: "tax", width: 80, align: "right", sorttype: "float"}, {
                name: "total",
                index: "total",
                width: 80,
                align: "right",
                sorttype: "float"
            }, {name: "note", index: "note", width: 150, sortable: false}],
            pager: "#pager_list_1",
            viewrecords: true,
            caption: "jqGrid 示例1",
            hidegrid: false
        });
        $("#table_list_2").jqGrid({
            data: mydata,
            datatype: "local",
            height: 450,
            width:  1000,
            autowidth: false,
//            scroll:true,
            scrollOffset : 20, // scroll 边框宽度
            shrinkToFit: false,
            rowNum: 20,
            responsive : false,
            rowList: [10, 20, 30],
            subGrid: true, // set the subGrid property to true to show expand buttons for each row
            subGridRowExpanded: showChildGrid, // javascript function that will take care of showing the child grid
            colNames: ["序号", "日期", "客户", "金额", "运费", "总额", "备注"],
            colModel: [{
                name: "id",
                index: "id",
                editable: true,
                width: 560,
                sorttype: "int",
                search: true
            }, {
                name: "invdate",
                index: "invdate",
                editable: true,
                width: 90,
                sorttype: "date",
                formatter: "date"
            }, {name: "name", index: "name", editable: true, width: 100}, {
                name: "amount",
                index: "amount",
                editable: true,
                width: 80,
                align: "right",
                sorttype: "float",
                formatter: "number"
            }, {
                name: "tax",
                index: "tax",
                editable: true,
                width: 80,
                align: "right",
                sorttype: "float"
            }, {
                name: "total",
                index: "total",
                editable: true,
                width: 80,
                align: "right",
                sorttype: "float"
            }, {name: "note", index: "note", editable: true, width: 100, sortable: false}],
            pager: "#pager_list_2",
            viewrecords: true,
            caption: "jqGrid 示例2",
            add: true,
            edit: true,
            addtext: "Add",
            edittext: "Edit",
            hidegrid: false,
            multiselect: true,
            rownumbers: true, // 显示行号
            rownumWidth: 25,
        });
        $("#table_list_2").setSelection(4, true);
        $("#table_list_2").jqGrid("navGrid", "#pager_list_2", {
            edit: true,
            add: true,
            del: true,
            search: true
        }, {height: '100%', reloadAfterSubmit: true});
//        $(window).bind("resize", function () {
//            var width = $(".jqGrid_wrapper").width();
////                var height = $(window).width();
//            $("#table_list_1").setGridWidth(width);
//            $("#table_list_2").setGridWidth(width)
//        });
        // the event handler on expanding parent row receives two parameters
        // the ID of the grid tow  and the primary key of the row
        function showChildGrid(parentRowID, parentRowKey) {
            $.ajax({
                url: parentRowKey+".html",
                type: "GET",
                success: function (html) {
                    $("#" + parentRowID).append(html);
                }
            });

        }
        // 取得选中行
        function getSelectedRows() {
            var grid = $("#jqGrid");
            var rowKey = grid.getGridParam("selrow");

            if (!rowKey)
                alert("No rows are selected");
            else {
                var selectedIDs = grid.getGridParam("selarrrow");
                var result = "";
                for (var i = 0; i < selectedIDs.length; i++) {
                    result += selectedIDs[i] + ",";
                }

                alert(result);
            }
        }
    });
</script>

</body>
</html>
